using UnityEngine;

public class DoorTrigger : MonoBehaviour
{
    public Animator doorAnimator; // Asigna el Animator de la puerta en el Inspector
    private static readonly string openTrigger = "Open";  // Nombre del trigger para abrir
    private static readonly string closeTrigger = "Close"; // Nombre del trigger para cerrar

    private bool isOpen = false; // Controla si la puerta est√° abierta o cerrada

    private void Start()
    {
        if (doorAnimator == null)
        {
            Debug.LogError("‚ùå No se encontr√≥ el Animator. Asigna la puerta en el Inspector.");
        }
    }

    private void OnTriggerEnter(Collider other)
    {
        Debug.Log("Objeto entr√≥ en el trigger: " + other.gameObject.name); // üü¢ Verificar qui√©n entra

        if (other.CompareTag("Player") && doorAnimator != null && !isOpen)
        {
            Debug.Log("¬°Player detectado! Abriendo puerta..."); // üü¢ Mensaje si el Player es detectado
            doorAnimator.SetTrigger(openTrigger);
            isOpen = true; // La puerta est√° abierta
        }
    }

    private void OnTriggerExit(Collider other)
    {
        if (other.CompareTag("Player") && doorAnimator != null && isOpen)
        {
            Debug.Log("Player sali√≥, cerrando puerta...");
            doorAnimator.SetTrigger(closeTrigger);
            isOpen = false; // La puerta se cierra
        }
    }
}
